files-cooked diske，对于生磁盘，用户用起来太麻烦，需要进一步抽象--文件。
![[Pasted image 20240330160621.png]]
核心在于文件和盘块的映射
![[Pasted image 20240330183929.png]]
# 各种映射关系：
## 连续存放结构
![[Pasted image 20240330184155.png]]
文件字符流顺序存储在盘块中，这种存储结构，想求出文件对应的盘块，需要存储**起始盘块**。存储在test.c的**FCP**。
缺点：如果文件增大，为了避免覆盖掉后面的文件，必须对文件进行挪动，以分配更大的位置。拷贝文件非常慢。所以这种方式不适合动态增长，适合直接读写（容易计算盘块位置，计算复杂度低）。这种类似于数组，适合随机读取，不适合动态变化。

## 链表结构
使用链表来实现文件的存储，每个盘块尾部放下一个盘块的序号，优点就是扩展方便，缺点是访问慢。
![[Pasted image 20240330185330.png]]
## 索引方式
linux0.11采用inode(indexnode)即索引方式。访问文件时，先读入inode，该位置存放了这个文件的盘块索引。然后根据索引，就可以找到文件某行对应的盘块。
![[Pasted image 20240330185632.png]]

## 实际的系统：多级索引
由于一个inode存不了多少盘块号，所以一般都是用多级索引的形式。大文件多级索引，小文件直接索引。
![[Pasted image 20240330190033.png]]
