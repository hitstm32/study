![[Pasted image 20240413155625.png]]
rep movw实际上是 `rep movw [di] [si]`，这样就把ds:si的内容复制到了es:di里。
`jmpi`是intel风格汇编的段间跳转，`jmpi gp, INITSEG`的意思就是把INITSEG赋给CS，go赋给IP。
![[Pasted image 20240413160521.png]]
BOOTSEG就是原来程序的start起始，INITSEG就是挪动后的start，jmpi go, INITSEG其实就是跳往了挪动后的GO标号处。这就体现出来分段的优势，直接改段基址即可。如果不分段，那"相对偏移"也要变，动态重定位就麻烦了。
上面这段程序把setup的四个扇区读进内存，读进了INITSEG下面偏移512字节的位置（跳过之前的代码），放入了90200H
![[Pasted image 20240413163445.png]]
读入之后，跳转到读入的程序执行。需要打印出LOGO，然后继续利用13号磁盘中断，读入操作系统的代码。
![[Pasted image 20240413164931.png]]
在read_it里继续读入system，当到达ENDSEG时