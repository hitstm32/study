内存怎么割？
**使用可变分区**，当段请求小时，从空闲分区里分配的也小。
![[Pasted image 20240322162840.png]]
如果有个段提出内存请求，reqSize = 40K，但是有两个空闲分区，分别为100K和50K可选，那选谁？
* 最佳适配：选50K，会产生很细小的块，适合有时候需要大块，有时候需要小块
* 最差适配：选100K，会造成内存里没有大块
* 首先适配：随便选第一个，分配的快，O(1)分配

可变分区造成的问题：**内存碎片化**
![[Pasted image 20240322164327.png]]
内存整理速度太慢，这个办法不可行。
解决办法：**内存分页**。物理内存被分成4k大小的页，段请求到来时，根据段请求大小，把一定数量的页分配给进程，这样即使浪费，也最多浪费4K，比大量内存碎片好很多。
![[Pasted image 20240322164656.png]]
但是，这样就导致了程序的段分配到的物理内存是不连续的，总之**程序希望内存分段，但是物理内存希望分页**。
这样，程序想要访问特定地址时，就得加上页的起始地址，起始地址存在**页表**中。
![[Pasted image 20240322204407.png]]
实际页表的转换，就是把逻辑页转换成了物理页，偏移地址是不变的。MMU的作用也是把逻辑页地址转为物理页地址。
