* 使用QT GUI Range 可以添加滑动条
![[Pasted image 20240716152042.png]]
* 也可以使用chooser实现选择

![[Pasted image 20240716193545.png]]
以上代码为寻每个输入向量中的最大值，向量为16代表一个向量中有16个采样点。![[Pasted image 20240716193711.png]]
途中，每一列都是一个vector，其中每个点都是一个采样点。<span style="color:#ffc000">思考：如果vectorsize设置为1，是不是就变成流式输入了？</span>

## message
用来在模块间传递信息，与采样时钟没有关联，不保证实时性
![[Pasted image 20240716225124.png]]
```python
"""
Embedded Python Blocks:

Each time this file is saved, GRC will instantiate the first class it finds
to get ports and parameters of your block. The arguments to __init__  will
be the parameters. All of them are required to have default values!
"""

import numpy as np
from gnuradio import gr
import pmt


class blk(gr.sync_block):  # other base classes are basic_block, decim_block, interp_block
    """Embedded Python Block example - a simple multiply const"""

    def __init__(self):  # only default arguments here
        """arguments to this function show up as parameters in GRC"""
        gr.sync_block.__init__(
            self,
            name='Muitiplex',   # will show up in GRC
            in_sig=[np.complex64, np.complex64],
            out_sig=[np.complex64]
        )
        # if an attribute with the same name as a parameter is found,
        # a callback is registered (properties work, too).
        self.selectPortName = 'selectPort'
        self.message_port_register_in(pmt.intern(self.selectPortName))
        self.set_msg_handler(pmt.intern(self.selectPortName), self.handle_msg)
        self.selector = True
        
        
    def handle_msg(self, msg):
    	self.selector = pmt.to_bool(msg)


    def work(self, input_items, output_items):
        """example: multiply with constant"""
        if(self.selector):
        	output_items[0][:] = input_items[0]
        else:
        	output_items[0][:] = input_items[1]
        
        return len(output_items[0])
```

```python
"""
Embedded Python Blocks:

Each time this file is saved, GRC will instantiate the first class it finds
to get ports and parameters of your block. The arguments to __init__  will
be the parameters. All of them are required to have default values!
"""

import numpy as np
from gnuradio import gr
import pmt

class blk(gr.sync_block):  # other base classes are basic_block, decim_block, interp_block
    """Embedded Python Block example - a simple multiply const"""

    def __init__(self, num_sample_to_count=128):  # only default arguments here
        """arguments to this function show up as parameters in GRC"""
        gr.sync_block.__init__(
            self,
            name='selector ctrl',   # will show up in GRC
            in_sig=[np.complex64],
            out_sig=[np.complex64]
        )
        
        
        # if an attribute with the same name as a parameter is found,
        # a callback is registered (properties work, too).
        self.num_sample_to_count = num_sample_to_count
        self.portName = 'messageOutput'
        self.message_port_register_out(pmt.intern(self.portName))
        
        self.state = True
        self.counter = 0

    def work(self, input_items, output_items):
        """example: multiply with constant"""
        self.counter = self.counter + len(output_items[0])
        
        if(self.counter > self.num_sample_to_count):
        	PMT_msg = pmt.from_bool(self.state)
        	self.message_port_pub(pmt.intern(self.portName), PMT_msg)
        	self.state = not(self.state)
        	self.counter = 0
        	
        output_items[0][:] = input_items[0]
        return len(output_items[0])
```

## tag
可以对数据打时间戳（相当于条件触发），并把触发信息输出给其他模块。
![[Pasted image 20240716225434.png]]