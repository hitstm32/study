![[Pasted image 20240819080450.png]]
CTRL、ALU均为纯组合逻辑。
程序生成过程：
![[Pasted image 20240819081145.png]]
所有的.o，和动态链接库.so，都符合同一套标准**ELF标准**：
![[Pasted image 20240819081329.png]]
所以为什么要分段？
* 从权限和安全性考虑：
	* 读入内存后，可以把code放入只读区，防止被篡改，高安全性
* 从程序体积考虑：
	* bss段不需要存储初值，后续会被操作系统填成0，所以.o文件中bss区并没有存储0，这样减小了应用程序的体积。

C程序被执行时，操作系统做了什么？
* a.out被操作系统载入内存
* 操作系统将建立栈区，然后将动态链接库
* 将环境变量，命令行参数放入加载好的内存空间。
* 调用main函数

程序的内存布局：
![[Pasted image 20240819082602.png]]
为什么要有栈？
用来支持高级语言的函数调用与返回。
为什么要有堆？
实现长生命周期的数据存储。实现函数之间的数据传递。
栈指向着堆（局部变量指针指向堆）。
**栈不存在内存泄漏，堆存在**
 ![[Pasted image 20240819083803.png]]
内存映象中，用户空间为低3G，内核空间为高1G。
随机offset作用是防止黑客拿到准确地址，提高程序安全性。memory mapping segment用来链接动态库。